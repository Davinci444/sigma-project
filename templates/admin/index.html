{% extends "admin/index.html" %}
{% load i18n %}

{% block content %}
<div id="content-main">
    
    <div style="padding: 20px; background: #f5f5f5; border: 1px solid #ddd; margin-bottom: 20px; border-radius: 8px;">
        <h2>Acciones Rápidas</h2>
        <div style="display: flex; gap: 10px;">
            <a href="{% url 'upload_fuel_file' %}" class="button" style="background-color: #4CAF50; color: white; padding: 15px 25px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; border-radius: 5px;">
                1. Importar Tanqueos (Excel)
            </a>
            <!-- --- NUEVO BOTÓN --- -->
            <a href="{% url 'run_periodic_checks' %}" class="button" style="background-color: #FF9800; color: white; padding: 15px 25px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; border-radius: 5px;">
                2. Ejecutar Revisiones Periódicas
            </a>
        </div>
        <p style="margin-top: 10px;">Primero importa los tanqueos para actualizar el kilometraje, luego ejecuta las revisiones para generar alertas.</p>
    </div>

    <!-- Bloque de Vista Operativa -->
    <div style="padding: 20px; background: #e3f2fd; border: 1px solid #90caf9; margin-bottom: 20px; border-radius: 8px;">
        <h2>Vista Operativa del Taller</h2>
        <ul style="list-style-type: none; padding-left: 0;">
            <li style="margin-bottom: 10px;">
                <a href="{% url 'admin:workorders_workorder_changelist' %}?operational_status=in_workshop" class="button" style="padding: 10px 15px; font-size: 14px;">
                    Ver Vehículos en Taller ({{ in_workshop_count }})
                </a>
            </li>
            <li>
                <a href="{% url 'admin:workorders_workorder_changelist' %}?operational_status=scheduled" class="button" style="padding: 10px 15px; font-size: 14px;">
                    Ver Vehículos Programados ({{ scheduled_count }})
                </a>
            </li>
        </ul>
    </div>

    <!-- Bloque de Reportes Gerenciales -->
    <div style="padding: 20px; background: #e8f5e9; border: 1px solid #a5d6a7; margin-bottom: 20px; border-radius: 8px;">
        <h2>Reportes Gerenciales</h2>
        <ul style="list-style-type: none; padding-left: 0;">
            <li style="margin-bottom: 10px;">
                <a href="{% url 'report_vehicle_costs' %}" class="button" style="background-color: #1565C0; color: white; padding: 10px 15px; font-size: 14px;">
                    Descargar Reporte de Costos por Vehículo (CSV)
                </a>
            </li>
            <li>
                <a href="{% url 'report_preventive_compliance' %}" class="button" style="background-color: #2E7D32; color: white; padding: 10px 15px; font-size: 14px;">
                    Descargar Reporte de Cumplimiento de Preventivos (CSV)
                </a>
            </li>
        </ul>
    </div>

    <!-- Bloque de Manuales de Mantenimiento -->
    <div style="padding: 20px; background: #fff8e1; border: 1px solid #ffe082; margin-bottom: 20px; border-radius: 8px;">
        <h2>Manuales de Mantenimiento</h2>
        <ul style="list-style-type: none; padding-left: 0;">
            <li>
                <a href="{% url 'admin:workorders_maintenancemanual_changelist' %}" class="button" style="padding: 10px 15px; font-size: 14px;">
                    Ver Manuales de Mantenimiento
                </a>
            </li>
        </ul>
    </div>

    <!-- Contenido original del admin (listas de modelos) -->
    {{ block.super }}
</div>
{% endblock %}
